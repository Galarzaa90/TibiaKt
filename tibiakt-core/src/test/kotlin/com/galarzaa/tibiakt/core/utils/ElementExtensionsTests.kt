/*
 * Copyright Â© 2023 Allan Galarza
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.galarzaa.tibiakt.core.utils

import io.kotest.core.spec.style.StringSpec
import io.kotest.matchers.shouldBe
import org.jsoup.Jsoup

class ElementExtensionsTests : StringSpec({
    "Parse a form with checkboxes"{
        val content: String =
            "<form action=\"https://www.tibia.com/news/?subtopic=newsarchive\" method=\"post\"><div class=\"TableContainer\"> <div class=\"CaptionContainer\"> <div class=\"CaptionInnerContainer\"> <span class=\"CaptionEdgeLeftTop\" style=\"background-image:url(https://static.tibia.com/images/global/content/box-frame-edge.gif);\"></span> <span class=\"CaptionEdgeRightTop\" style=\"background-image:url(https://static.tibia.com/images/global/content/box-frame-edge.gif);\"></span> <span class=\"CaptionBorderTop\" style=\"background-image:url(https://static.tibia.com/images/global/content/table-headline-border.gif);\"></span> <span class=\"CaptionVerticalLeft\" style=\"background-image:url(https://static.tibia.com/images/global/content/box-frame-vertical.gif);\"></span> <div class=\"Text\">News Archive Search</div> <span class=\"CaptionVerticalRight\" style=\"background-image:url(https://static.tibia.com/images/global/content/box-frame-vertical.gif);\"></span> <span class=\"CaptionBorderBottom\" style=\"background-image:url(https://static.tibia.com/images/global/content/table-headline-border.gif);\"></span> <span class=\"CaptionEdgeLeftBottom\" style=\"background-image:url(https://static.tibia.com/images/global/content/box-frame-edge.gif);\"></span> <span class=\"CaptionEdgeRightBottom\" style=\"background-image:url(https://static.tibia.com/images/global/content/box-frame-edge.gif);\"></span> </div> </div><table class=\"Table3\" cellpadding=\"0\" cellspacing=\"0\">  <tbody><tr> <td> <div class=\"InnerTableContainer\"> <table style=\"width:100%;\"><tbody><tr><td> <div class=\"TableContentContainer\"> <table class=\"TableContent\" width=\"100%\" style=\"border:1px solid #faf0d7;\"><tbody><tr><td width=\"25%\"><b>Time Period</b></td><td width=\"30%\"><b>Type</b></td><td width=\"30%\"><b>Category</b></td></tr><tr><td><table class=\"DateTable\"><tbody><tr><td></td><td>Day:</td><td>Month:</td><td>Year:</td></tr><tr><td>From:</td><td nowrap=\"nowrap\"><select name=\"filter_begin_day\"><option value=\"1\">1</option><option value=\"2\">2</option><option value=\"3\">3</option><option value=\"4\">4</option><option value=\"5\">5</option><option value=\"6\">6</option><option value=\"7\">7</option><option value=\"8\">8</option><option value=\"9\">9</option><option value=\"10\">10</option><option value=\"11\">11</option><option value=\"12\">12</option><option value=\"13\">13</option><option value=\"14\">14</option><option value=\"15\">15</option><option value=\"16\">16</option><option value=\"17\">17</option><option value=\"18\">18</option><option value=\"19\">19</option><option value=\"20\">20</option><option value=\"21\">21</option><option value=\"22\">22</option><option value=\"23\">23</option><option value=\"24\">24</option><option value=\"25\" selected=\"selected\">25</option><option value=\"26\">26</option><option value=\"27\">27</option><option value=\"28\">28</option><option value=\"29\">29</option><option value=\"30\">30</option><option value=\"31\">31</option></select></td><td nowrap=\"nowrap\"><select name=\"filter_begin_month\"><option value=\"1\">1</option><option value=\"2\">2</option><option value=\"3\">3</option><option value=\"4\">4</option><option value=\"5\">5</option><option value=\"6\">6</option><option value=\"7\">7</option><option value=\"8\" selected=\"selected\">8</option><option value=\"9\">9</option><option value=\"10\">10</option><option value=\"11\">11</option><option value=\"12\">12</option></select></td><td><select name=\"filter_begin_year\"><option value=\"2000\">2000</option><option value=\"2001\">2001</option><option value=\"2002\">2002</option><option value=\"2003\">2003</option><option value=\"2004\">2004</option><option value=\"2005\">2005</option><option value=\"2006\">2006</option><option value=\"2007\">2007</option><option value=\"2008\">2008</option><option value=\"2009\">2009</option><option value=\"2010\">2010</option><option value=\"2011\">2011</option><option value=\"2012\">2012</option><option value=\"2013\">2013</option><option value=\"2014\">2014</option><option value=\"2015\">2015</option><option value=\"2016\">2016</option><option value=\"2017\">2017</option><option value=\"2018\">2018</option><option value=\"2019\">2019</option><option value=\"2020\">2020</option><option value=\"2021\" selected=\"selected\">2021</option></select></td></tr><tr><td></td></tr><tr><td></td><td>Day:</td><td>Month:</td><td>Year:</td></tr><tr><td align=\"right\">To:</td><td nowrap=\"nowrap\"><select name=\"filter_end_day\"><option value=\"1\">1</option><option value=\"2\">2</option><option value=\"3\">3</option><option value=\"4\">4</option><option value=\"5\">5</option><option value=\"6\">6</option><option value=\"7\">7</option><option value=\"8\">8</option><option value=\"9\">9</option><option value=\"10\">10</option><option value=\"11\">11</option><option value=\"12\">12</option><option value=\"13\">13</option><option value=\"14\">14</option><option value=\"15\">15</option><option value=\"16\">16</option><option value=\"17\">17</option><option value=\"18\">18</option><option value=\"19\">19</option><option value=\"20\">20</option><option value=\"21\">21</option><option value=\"22\">22</option><option value=\"23\">23</option><option value=\"24\" selected=\"selected\">24</option><option value=\"25\">25</option><option value=\"26\">26</option><option value=\"27\">27</option><option value=\"28\">28</option><option value=\"29\">29</option><option value=\"30\">30</option><option value=\"31\">31</option></select></td><td nowrap=\"nowrap\"><select name=\"filter_end_month\"><option value=\"1\">1</option><option value=\"2\">2</option><option value=\"3\">3</option><option value=\"4\">4</option><option value=\"5\">5</option><option value=\"6\">6</option><option value=\"7\">7</option><option value=\"8\">8</option><option value=\"9\" selected=\"selected\">9</option><option value=\"10\">10</option><option value=\"11\">11</option><option value=\"12\">12</option></select></td><td><select name=\"filter_end_year\"><option value=\"2000\">2000</option><option value=\"2001\">2001</option><option value=\"2002\">2002</option><option value=\"2003\">2003</option><option value=\"2004\">2004</option><option value=\"2005\">2005</option><option value=\"2006\">2006</option><option value=\"2007\">2007</option><option value=\"2008\">2008</option><option value=\"2009\">2009</option><option value=\"2010\">2010</option><option value=\"2011\">2011</option><option value=\"2012\">2012</option><option value=\"2013\">2013</option><option value=\"2014\">2014</option><option value=\"2015\">2015</option><option value=\"2016\">2016</option><option value=\"2017\">2017</option><option value=\"2018\">2018</option><option value=\"2019\">2019</option><option value=\"2020\">2020</option><option value=\"2021\" selected=\"selected\">2021</option></select></td></tr></tbody></table></td><td><label><input type=\"checkbox\" name=\"filter_ticker\" value=\"ticker\" checked=\"checked\">News Ticker</label><br><label><input type=\"checkbox\" name=\"filter_article\" value=\"article\" checked=\"checked\">Featured Article</label><br><label><input type=\"checkbox\" name=\"filter_news\" value=\"news\" checked=\"checked\">News</label><br></td><td><label><input type=\"checkbox\" name=\"filter_cipsoft\" value=\"cipsoft\" checked=\"checked\"><img class=\"NewsTypeIcon\" src=\"https://static.tibia.com/images/global/content/newsicon_cipsoft_small.gif\"> CipSoft</label><br><label><input type=\"checkbox\" name=\"filter_community\" value=\"community\" checked=\"checked\"><img class=\"NewsTypeIcon\" src=\"https://static.tibia.com/images/global/content/newsicon_community_small.gif\"> Community</label><br><label><input type=\"checkbox\" name=\"filter_development\" value=\"development\" checked=\"checked\"><img class=\"NewsTypeIcon\" src=\"https://static.tibia.com/images/global/content/newsicon_development_small.gif\"> Development</label><br><label><input type=\"checkbox\" name=\"filter_support\" value=\"support\" checked=\"checked\"><img class=\"NewsTypeIcon\" src=\"https://static.tibia.com/images/global/content/newsicon_support_small.gif\"> Support</label><br><label><input type=\"checkbox\" name=\"filter_technical\" value=\"technical\" checked=\"checked\"><img class=\"NewsTypeIcon\" src=\"https://static.tibia.com/images/global/content/newsicon_technical_small.gif\"> Technical Issues</label><br></td></tr> </tbody></table> </div></td></tr> </tbody></table> </div> </td> </tr> </tbody></table></div><br><center><div class=\"BigButton\" style=\"background-image:url(https://static.tibia.com/images/global/buttons/button_blue.gif)\"><div onmouseover=\"MouseOverBigButton(this);\" onmouseout=\"MouseOutBigButton(this);\"><div class=\"BigButtonOver\" style=\"background-image:url(https://static.tibia.com/images/global/buttons/button_blue_over.gif);\"></div><input class=\"BigButtonText\" type=\"submit\" value=\"Submit\"></div></div></center></form>"
        val formElement = Jsoup.parse(content).selectFirst("form")
        val formData = formElement!!.formData()
        formData.values["filter_begin_day"] shouldBe "25"
    }
})
